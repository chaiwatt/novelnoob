<?php

namespace Database\Seeders;

use Illuminate\Database\Seeder;
use App\Models\Article;
use App\Models\FeatureArticle;
use Carbon\Carbon;
use Illuminate\Support\Facades\DB;

class ArticleSeeder extends Seeder
{
    /**
     * Run the database seeds.
     *
     * @return void
     */
    public function run()
    {
        // 1. ล้างข้อมูลเก่า
        DB::statement('SET FOREIGN_KEY_CHECKS=0;');
        Article::truncate();
        FeatureArticle::truncate();
        DB::statement('SET FOREIGN_KEY_CHECKS=1;');

        // 2. กำหนดกลุ่ม Tags ที่จะใช้สุ่ม
        $tagsPool = [
            ['tag' => 'เทคนิคการเขียน', 'tag_slug' => 'เทคนิคการเขียน'],
            ['tag' => 'AI Assistant', 'tag_slug' => 'AI Assistant'],
            ['tag' => 'การวางพล็อต', 'tag_slug' => 'การวางพล็อต'],
            ['tag' => 'Ebook', 'tag_slug' => 'Ebook'],
            ['tag' => 'การตลาด', 'tag_slug' => 'การตลาด'],
            ['tag' => 'การสร้างตัวละคร', 'tag_slug' => 'การสร้างตัวละคร'],
            ['tag' => 'World-Building', 'tag_slug' => 'World-Building']
        ];

        // 3. ⭐️ (แก้) สร้าง Array ข้อมูลที่สมบูรณ์ 20 รายการ ⭐️
        $articlesData = [
            [
                'title' => '5 วิธีใช้ AI ช่วยคิดพล็อตนิยายที่ไม่ซ้ำใคร',
                'meta' => 'สรุปเคล็ดลับ 5 ข้อในการใช้ AI ช่วยระดมสมอง สร้างพล็อตนิยายที่สดใหม่และไม่ซ้ำใคร',
                'body' => '<p>การเผชิญหน้ากับ "Writer\'s Block" หรือพล็อตตันเป็นเรื่องปกติของนักเขียน แต่ในยุคนี้เรามี AI เป็นผู้ช่วยชั้นยอดในการระดมสมอง AI สามารถช่วยเรามองเห็นความเป็นไปได้ใหม่ๆ ที่เราอาจนึกไม่ถึง ลองใช้เครื่องมือเหล่านี้เป็นคู่คิด แล้วคุณจะพบว่าการสร้างพล็อตที่ซับซ้อนและไม่ซ้ำใครนั้นง่ายกว่าที่คิด</p>'
                        . '<h3>หัวข้อย่อยที่ 1: ความสำคัญของการใช้ AI</h3>'
                        . '<p>AI ไม่ได้มาแทนที่เรา แต่มาเป็นเครื่องมือขยายจินตนาการ มันสามารถประมวลผลข้อมูลจำนวนมหาศาลและเสนอ "มุม" ที่แตกต่างออกไป ช่วยทลายกำแพงความคิดเดิมๆ ของเราได้ การใช้ AI อย่างฉลาดคือการ "ต่อยอด" ไม่ใช่การ "ลอกเลียน"</p>'
                        . '<h3>หัวข้อย่อยที่ 2: วิธีการปฏิบัติ (5 เทคนิค)</h3>'
                        . '<p>1. เทคนิค "What if?": ป้อนสถานการณ์พื้นฐานแล้วถาม AI ว่า "จะเกิดอะไรขึ้นถ้า..." 2. ผสม Genre: สั่งให้ AI ร่างพล็อต "Sci-fi + Romance" หรือ "Horror + Comedy" 3. สร้างข้อจำกัด: ให้ AI สร้างเรื่องจากข้อจำกัดแปลกๆ 4. พลิกมุมมอง: เล่านิทานคลาสสิกจากมุมมองตัวร้าย 5. ใช้ Keyword สุ่ม: ให้ AI สร้างเรื่องจาก 3 คำที่ไม่เกี่ยวข้องกัน</p>'
            ],
            [
                'title' => 'เทคนิคสร้างตัวละครให้น่าจดจำด้วย AI Assistant',
                'meta' => 'เรียนรู้วิธีใช้ AI Assistant ช่วยสร้างมิติตัวละคร ทั้งปูมหลัง, จุดแข็ง, จุดอ่อน, และเป้าหมาย',
                'body' => '<p>ตัวละครคือหัวใจของนิยาย การสร้างตัวละครที่ "กลม" และน่าจดจำจึงสำคัญมาก AI สามารถช่วยเราในกระบวนการนี้ได้โดยการรับบทเป็น "คู่คิด" ช่วยเติมเต็มช่องว่างที่เราอาจมองข้ามไป ตั้งแต่ปูมหลัง, ความกลัว, ไปจนถึงเป้าหมายที่ซ่อนเร้น</p>'
                        . '<h3>หัวข้อย่อยที่ 1: ความสำคัญของมิติตัวละคร</h3>'
                        . '<p>ผู้อ่านจะผูกพันกับตัวละครที่มีที่มาที่ไปและเหตุผลในการกระทำ ไม่ใช่ตัวละครที่ "แบน" หรือสมบูรณ์แบบเกินไป ตัวละครที่มีปม (Flaw) และความขัดแย้งภายใน (Internal Conflict) คือตัวละครที่ผู้อ่านจะจดจำได้นาน</p>'
                        . '<h3>หัวข้อย่อยที่ 2: วิธีการใช้ AI</h3>'
                        . '<p>ลองป้อน "prompt" ให้ AI ช่วยร่าง "Character Profile" โดยระบุอาชีพและนิสัยคร่าวๆ แล้วให้ AI ช่วยเติม "Backstory" หรือ "ความลับ" ที่ตัวละครนี้เก็บซ่อนไว้ หรือจะให้ AI ช่วยคิด "Arc" การเติบโตของตัวละครจากต้นจนจบเรื่องก็ได้</p>'
            ],
            [
                'title' => 'จากต้นฉบับสู่ Ebook: คู่มือสำหรับนักเขียนมือใหม่',
                'meta' => 'ขั้นตอนการเปลี่ยนต้นฉบับนิยายของคุณให้กลายเป็น Ebook พร้อมขายบนแพลตฟอร์มชั้นนำ',
                'body' => '<p>การเขียนนิยายจบเป็นเพียง "ครึ่งแรก" ของการเดินทาง อีกครึ่งคือการนำผลงานนั้นไปสู่สายตาผู้อ่าน การทำ Ebook เป็นวิธีที่ง่ายและรวดเร็วที่สุดสำหรับนักเขียนยุคใหม่ในการเผยแพร่ผลงานโดยไม่ต้องผ่านสำนักพิมพ์ บทความนี้จะสรุปขั้นตอนสำคัญ</p>'
                        . '<h3>หัวข้อย่อยที่ 1: ความสำคัญของการเตรียมต้นฉบับ</h3>'
                        . '<p>ก่อนจะทำ Ebook คุณต้องมั่นใจว่าต้นฉบับของคุณ "สะอาด" ที่สุด นั่นคือการพิสูจน์อักษร (Proofreading) และการบรรณาธิการ (Editing) เพื่อแก้ไขคำผิด, สำนวน, และความสมเหตุสมผลของเนื้อเรื่อง อย่ามองข้ามขั้นตอนนี้เด็ดขาด</p>'
                        . '<h3>หัวข้อย่อยที่ 2: วิธีการและแพลตฟอร์ม</h3>'
                        . '<p>คุณต้องออกแบบปกที่ดึงดูดสายตา และจัดหน้า (Formatting) ต้นฉบับให้ถูกต้องตามมาตรฐานไฟล์ .epub หรือ .mobi จากนั้นจึงนำไปอัปโหลดบนแพลตฟอร์มเช่น Meb, Ookbee, หรือ Amazon KDP โดยแต่ละแพลตฟอร์มจะมีเงื่อนไขและส่วนแบ่งรายได้ที่ต่างกัน</p>'
            ],
            [
                'title' => 'การเขียนบทสนทนา (Dialogue) ที่ทรงพลังและสมจริง',
                'meta' => 'เรียนรู้เทคนิคการเขียนบทสนทนาที่ "คม" สมจริง และทำหน้าที่ขับเคลื่อนเรื่องราวไปข้างหน้า',
                'body' => '<p>บทสนทนาไม่ใช่แค่การ "พูดคุย" ของตัวละคร แต่เป็นเครื่องมือสำคัญในการเปิดเผยนิสัย, ขับเคลื่อนพล็อต, และสร้างความตึงเครียด บทสนทนาที่ดีย่อม "ทำหน้าที่" มากกว่าหนึ่งอย่างในเวลาเดียวกัน และต้องฟังดูสมจริงเหมือนมนุษย์พูดกัน</p>'
                        . '<h3>หัวข้อย่อยที่ 1: ความสำคัญของ Subtext</h3>'
                        . '<p>"Subtext" คือสิ่งที่ตัวละคร "คิด" แต่ "ไม่ได้พูด" ออกมาตรงๆ การเขียนบทสนทนาที่ดีคือการที่ผู้อ่านสัมผัสได้ถึง Subtext นี้ เช่น ตัวละครอาจพูดว่า "อากาศดีนะ" แต่ความหมายที่ซ่อนอยู่คือ "ฉันอึดอัดมากที่ต้องอยู่กับเธอ"</p>'
                        . '<h3>หัวข้อย่อยที่ 2: วิธีการเขียน Dialogue ที่ดี</h3>'
                        . '<p>1. แต่ละตัวละครต้องมี "เสียง" (Voice) ของตัวเอง 2. หลีกเลี่ยงการ "ป้อนข้อมูล" (Exposition) ผ่านบทสนทนามากเกินไป 3. ใช้ "Action Beat" (เช่น การยกแก้วน้ำ, การเหม่อมอง) คั่นกลางแทนการใช้คำว่า "เขาพูด" "เธอพูด" ซ้ำๆ</p>'
            ],
            [
                'title' => 'จิตวิทยาเบื้องหลังตัวร้าย (Villain) ที่น่าสนใจ',
                'meta' => 'สร้างตัวร้ายที่น่าจดจำ ไม่ใช่แค่ "ชั่ว" แต่มีเหตุผลและความเชื่อที่ทำให้ผู้อ่าน "เข้าใจ" การกระทำของเขา',
                'body' => '<p>ตัวร้ายที่ยอดเยี่ยมคือตัวละครที่ผู้อ่านเกลียดไม่ลง หรืออย่างน้อยก็ "เข้าใจ" เหตุผลของเขา ตัวร้ายที่แบนราบและ "ชั่วเพื่อชั่ว" นั้นน่าเบื่อ แต่ตัวร้ายที่เชื่อว่าสิ่งที่เขาทำนั้น "ถูกต้อง" ในโลกของเขาต่างหากที่น่าจดจำ</p>'
                        . '<h3>หัวข้อย่อยที่ 1: ความสำคัญของแรงจูงใจ (Motivation)</h3>'
                        . '<p>ตัวร้ายทุกคนคือ "ฮีโร่" ในเรื่องเล่าของตัวเอง พวกเขาต้องมีเป้าหมายที่ชัดเจนและแรงจูงใจที่หนักแน่น (แม้จะเป็นแรงจูงใจที่บิดเบี้ยวก็ตาม) เช่น การล้างแค้น, อุดมการณ์ที่ผิดเพี้ยน, หรือความรักที่ครอบงำจิตใจ</p>'
                        . '<h3>หัวข้อย่อยที่ 2: วิธีการสร้างตัวร้ายที่มีมิติ</h3>'
                        . '<p>ลองให้เขามี "จุดอ่อน" หรือ "ความดี" เล็กๆ ที่ขัดแย้งกับการกระทำของเขา ให้เขามีความสัมพันธ์ที่ซับซ้อนกับตัวเอก (เช่น เป็นอดีตเพื่อน, อาจารย์, หรือคนรัก) และที่สำคัญคือ เป้าหมายของเขาต้องสมเหตุสมผลในมุมมองของเขา</p>'
            ],
            [
                'title' => 'วิธีเอาชนะ Writer’s Block ด้วยเทคนิคง่ายๆ 3 ข้อ',
                'meta' => 'อย่าปล่อยให้ภาวะ "สมองตัน" มาขัดขวางการเขียนของคุณ ลองใช้ 3 เทคนิคง่ายๆ นี้เพื่อกลับมาเขียนได้อีกครั้ง',
                'body' => '<p>Writer\'s Block หรือภาวะสมองตัน คือฝันร้ายของนักเขียนทุกคน อาการที่จู่ๆ ก็นึกอะไรไม่ออก จ้องหน้ากระดาษเปล่าเป็นชั่วโมง มันเกิดขึ้นได้กับทุกคน แต่ข่าวดีคือมันมีวิธีแก้ไข และส่วนใหญ่มักเกิดจากความกลัว ไม่ใช่การ "หมดไฟ" จริงๆ</p>'
                        . '<h3>หัวข้อย่อยที่ 1: ความสำคัญของการ "แค่เริ่มเขียน"</h3>'
                        . '<p>ปัญหาหลักคือ "ความกลัว" ที่จะเขียนออกมาไม่ดี ความคาดหวังที่สูงเกินไปทำให้เราไม่กล้าแม้แต่จะเริ่มพิมพ์ประโยคแรก วิธีแก้คือการ "อนุญาต" ให้ตัวเองเขียน "ห่วย" ได้ ขอแค่ได้เขียนอะไรก็ได้ลงไปก่อน</p>'
                        . '<h3>หัวข้อย่อยที่ 2: เทคนิค 3 ข้อ</h3>'
                        . '<p>1. "Free Writing": ตั้งเวลา 10 นาที แล้วเขียนอะไรก็ได้ที่คิดออกโดยห้ามหยุด ห้ามแก้ไข 2. "Pomodoro Technique": ทำงาน 25 นาที พัก 5 นาที ช่วยลดความรู้สึก "น่ากลัว" ของงานใหญ่ 3. "เปลี่ยนสถานที่": การเปลี่ยนสภาพแวดล้อมสามารถกระตุ้นสมองได้</p>'
            ],
            [
                'title' => 'การสร้างโลก (World-Building) ให้น่าเชื่อถือในนิยายแฟนตาซี',
                'meta' => 'สร้างโลกแฟนตาซีที่มีชีวิตชีวาและน่าเชื่อถือ ไม่ใช่แค่การมีเวทมนตร์ แต่คือการสร้างกฎเกณฑ์และวัฒนธรรม',
                'body' => '<p>ในนิยายแฟนตาซี "โลก" หรือ "Setting" ก็คือหนึ่งในตัวละครหลัก การสร้างโลกที่น่าเชื่อถือไม่ใช่แค่การคิดชื่อสถานที่แปลกๆ หรือเผ่าพันธุ์ใหม่ๆ แต่คือการสร้าง "ระบบ" ที่ทำให้โลกนั้นขับเคลื่อนไปได้อย่างสมเหตุสมผล</p>'
                        . '<h3>หัวข้อย่อยที่ 1: ความสำคัญของ "กฎ" (Rules)</h3>'
                        . '<p>โลกของคุณมีเวทมนตร์หรือไม่? ถ้ามี "กฎ" ของมันคืออะไร? ใครใช้ได้? มีข้อจำกัดหรือ "ราคา" ที่ต้องจ่ายหรือไม่? กฎที่ชัดเจนทำให้ผู้อ่านรู้สึกว่าโลกนี้น่าเชื่อถือ ไม่ใช่การที่ตัวเอก "เสก" อะไรก็ได้ตามใจชอบ</p>'
                        . '<h3>หัวข้อย่อยที่ 2: วิธีการสร้างโลกที่ลึก</h3>'
                        . '<p>คิดถึงสิ่งที่มากกว่าแค่แผนที่ เช่น ระบบการปกครอง, เศรษฐกิจ (ใช้อะไรแลกเปลี่ยน), ศาสนาและความเชื่อ, วัฒนธรรมและประเพณีของแต่ละเผ่าพันธุ์ ที่สำคัญคือ "ประวัติศาสตร์" ของโลกนี้ อะไรที่ทำให้โลกเป็นแบบที่เป็นในปัจจุบัน</p>'
            ],
            [
                'title' => 'เคล็ดลับการเขียน "Show, Don\'t Tell" ที่ใช้ได้ผลจริง',
                'meta' => 'เรียนรู้วิธีการ "แสดง" ให้ผู้อ่านเห็นภาพและรู้สึก แทนที่จะ "บอก" พวกเขาตรงๆ ว่าเกิดอะไรขึ้น',
                'body' => '<p>"Show, Don\'t Tell" (แสดง, อย่าบอก) คือหนึ่งในกฎทองของการเขียนที่นักเขียนใหม่มักสับสน มันคือการเปลี่ยนจากการ "สรุป" เหตุการณ์ (Telling) ไปเป็นการ "วาดภาพ" ให้ผู้อ่านสัมผัสเหตุการณ์นั้นด้วยตัวเอง (Showing)</p>'
                        . '<h3>หัวข้อย่อยที่ 1: ความสำคัญของการ "แสดง"</h3>'
                        . '<p>การบอกว่า "สมชายโกรธ" (Telling) นั้นง่าย แต่ก็น่าเบื่อ การแสดงว่า "สมชายกำหมัดแน่นจนเล็บจิกเข้าเนื้อ ขบกรามจนเห็นสันนูน" (Showing) จะทรงพลังกว่ามาก มันเปิดโอกาสให้ผู้อ่าน "ตีความ" อารมณ์ด้วยตัวเองและรู้สึกมีส่วนร่วม</p>'
                        . '<h3>หัวข้อย่อยที่ 2: วิธีการฝึก "Show"</h3>'
                        . '<p>ฝึกใช้ "ประสาทสัมผัสทั้ง 5" (รูป, รส, กลิ่น, เสียง, สัมผัส) ในการบรรยายฉาก ให้ความสำคัญกับ "การกระทำ" (Action) และ "ปฏิกิริยา" (Reaction) ของตัวละครแทนการอธิบายความคิดของเขาตรงๆ</p>'
            ],
            [
                'title' => 'การตลาด Ebook 101: โปรโมทนิยายของคุณอย่างไรให้ปัง',
                'meta' => 'เขียนจบคือจุดเริ่มต้น การตลาด Ebook คือสิ่งที่จะทำให้แน่ใจว่านิยายของคุณ "ถูกค้นพบ" ในทะเล Ebook นับล้าน',
                'body' => '<p>ในยุคที่ใครๆ ก็เป็นนักเขียน Ebook ได้ การแข่งขันจึงสูงมาก การเขียนนิยายดีๆ นั้นสำคัญ แต่การ "ตลาด" ให้เป็นก็สำคัญไม่แพ้กัน การโปรโมทที่ดีจะช่วยให้นิยายของคุณโดดเด่นขึ้นมาจากคู่แข่งและไปถึงกลุ่มผู้อ่านที่ถูกต้อง</p>'
                        . '<h3>หัวข้อย่อยที่ 1: ความสำคัญของการรู้จักกลุ่มเป้าหมาย</h3>'
                        . '<p>คุณไม่สามารถ "ขาย" นิยายของคุณให้คน "ทุกคน" ได้ คุณต้องรู้ว่านิยายของคุณเหมาะกับใคร? (เช่น วัยรุ่นหญิง, คนชอบนิยายสืบสวน, แฟนนิยายวาย) เมื่อรู้กลุ่มเป้าหมาย คุณจะสามารถเลือกช่องทางโปรโมทและใช้ภาษาที่ "โดนใจ" พวกเขาได้</p>'
                        . '<h3>หัวข้อย่อยที่ 2: วิธีการโปรโมทเบื้องต้น</h3>'
                        . '<p>1. โซเชียลมีเดีย: สร้างตัวตนในช่องทางที่กลุ่มเป้าหมายของคุณอยู่ (เช่น Twitter (X), TikTok, Facebook Group) 2. "คำโปรย" และ "ปก": สองสิ่งนี้คือ "หน้าร้าน" ของคุณ ต้องดึงดูดสายตาและน่าสนใจ 3. การทำโปรโมชั่น: เช่น การลดราคาช่วงเปิดตัว หรือการจัด "ReadAWrite" (Reread)</p>'
            ],
            [
                'title' => 'การใช้ AI ช่วยบรรยายฉากและอารมณ์',
                'meta' => 'ให้ AI เป็นผู้ช่วยในการ "วาดภาพด้วยคำ" เรียนรู้วิธีใช้ AI ขัดเกลาการบรรยายฉากและอารมณ์ให้ลึกซึ้งยิ่งขึ้น',
                'body' => '<p>การบรรยายฉาก (Setting) และอารมณ์ (Emotion) เป็นส่วนที่ยากที่สุดส่วนหนึ่งของการเขียน บางครั้งเรารู้สึกแต่ "นึกคำ" ไม่ออก AI สามารถเข้ามาช่วยในจุดนี้ได้โดยการเสนอ "คลังคำ" (Vocabulary) หรือ "มุมมอง" การบรรยายที่เราอาจมองข้าม</p>'
                        . '<h3>หัวข้อย่อยที่ 1: ความสำคัญของการบรรยาย</h3>'
                        . '<p>ฉากและอารมณ์คือสิ่งที่สร้าง "บรรยากาศ" (Atmosphere) ให้กับเรื่อง ฉากที่ "มีชีวิต" จะช่วยให้ผู้อ่านอินไปกับเรื่องราว การบรรยายอารมณ์ที่ลึกซึ้งจะทำให้ผู้อ่านผูกพันกับตัวละคร ไม่ใช่แค่การบอกว่า "เขาเศร้า"</p>'
                        . '<h3>หัวข้อย่อยที่ 2: วิธีการใช้ AI ช่วยบรรยาย</h3>'
                        . '<p>ลองป้อนฉากง่ายๆ (เช่น "ห้องนอนตอนกลางคืน") แล้วขอให้ AI "ขยายความ" โดยเน้น "กลิ่น" หรือ "เสียง" หรือป้อนอารมณ์ (เช่น "ความสิ้นหวัง") แล้วขอให้ AI ช่วยบรรยาย "อาการทางกายภาพ" ของคนที
่รู้สึกสิ้นหวัง</p>'
            ],
            [
                'title' => 'โครงสร้างพล็อต 3 องก์ (Three-Act Structure) คืออะไร',
                'meta' => 'โครงสร้าง 3 องก์ คือพิมพ์เขียวคลาสสิกของเรื่องเล่าเกือบทุกเรื่อง เรียนรู้พื้นฐานนี้เพื่อสร้างพล็อตที่ "แน่น"',
                'body' => '<p>โครงสร้างพล็อต 3 องก์ คือกระดูกสันหลังของเรื่องเล่าที่ใช้กันมานับพันปี ตั้งแต่ละครเวทีกรีกโบราณจนถึงภาพยนตร์ฮอลลีวูดในปัจจุบัน มันคือการแบ่งเรื่องราวออกเป็น 3 ส่วนที่ชัดเจน: การเริ่มต้น (Setup), การเผชิญหน้า (Confrontation), และการคลี่คลาย (Resolution)</p>'
                        . '<h3>หัวข้อย่อยที่ 1: ความสำคัญของโครงสร้าง</h3>'
                        . '<p>โครงสร้างไม่ใช่ "สูตรสำเร็จ" ที่ต้องทำตามเป๊ะๆ แต่เป็น "แผนที่" ที่ช่วยให้แน่ใจว่าเรื่องของคุณมีจุดเริ่มต้น, จุดพีค, และจุดจบที่สมบูรณ์ มันช่วยคุมจังหวะของเรื่อง (Pacing) และทำให้ผู้อ่านรู้สึก "อิ่ม" เมื่ออ่านจบ</p>'
                        . '<h3>หัวข้อย่อยที่ 2: องค์ประกอบ 3 องก์</h3>'
                        . '<p>องก์ที่ 1 (The Setup): แนะนำตัวละคร, โลก, และ "จุดชนวน" (Inciting Incident) ที่ดึงตัวเอกเข้าสู่เรื่อง องก์ที่ 2 (The Confrontation): ตัวเอกเผชิญอุปสรรคที่ยากขึ้นเรื่อยๆ, ล้มเหลว, เรียนรู้, จนถึง "จุดต่ำสุด" (Midpoint/Crisis) องก์ที่ 3 (The Resolution): การเผชิญหน้าครั้งสุดท้าย (Climax) และการคลี่คลายปมทั้งหมด (Resolution)</p>'
            ],
            [
                'title' => 'การเขียนฉากเปิดเรื่อง (Opening Scene) ให้น่าติดตาม',
                'meta' => 'หน้าแรกคือด่านที่ยากที่สุด ทำอย่างไรให้ผู้อ่าน "ติดหนึบ" ตั้งแต่ประโยคแรกและไม่อยากวางนิยายของคุณลง',
                'body' => '<p>ในยุคที่ผู้อ่านมีตัวเลือกนับล้าน ฉากเปิดเรื่องหรือ "หน้าแรก" ของคุณคือโอกาสเดียวที่จะสร้างความประทับใจ ถ้าคุณไม่สามารถ "จับ" พวกเขาได้ตั้งแต่หน้าแรก พวกเขาก็พร้อมจะไปอ่านเรื่องอื่นทันที การเปิดเรื่องที่ดีย่อมสร้าง "คำถาม" หรือ "ความขัดแย้ง" ทันที</p>'
                        . '<h3>หัวข้อย่อยที่ 1: ความสำคัญของ "Hook" (ตะขอ)</h3>'
                        . '<p>"Hook" คือประโยคหรือย่อหน้าแรกที่ "กระตุก" ความสนใจของผู้อ่าน มันต้องสร้าง "คำถาม" ในใจผู้อ่านทันที (เช่น "เกิดอะไรขึ้น?", "ทำไมเขาถึงทำแบบนั้น?") หรือนำเสนอสถานการณ์ที่ "ไม่ปกติ" และน่าตื่นเต้น</p>'
                        . '<h3>หัวข้อย่อยที่ 2: วิธีการเขียนฉากเปิดที่ดี</h3>'
                        . '<p>1. "In Medias Res": เปิดเรื่องกลางเหตุการณ์ (เช่น เปิดมาก็กำลังหนี) 2. สร้างความเห็นอกเห็นใจ: เปิดเรื่องด้วยปัญหาหรือความเจ็บปวดของตัวเอก 3. สร้างปริศนา: เปิดเรื่องด้วยฉากฆาตกรรมหรือเหตุการณ์ลึกลับ หลีกเลี่ยงการ "บรรยาย" โลกหรือประวัติตัวละครยืดยาวในหน้าแรก</p>'
            ],
            [
                'title' => 'วิธีตั้งชื่อตัวละครให้เข้ากับ сетติ้งของเรื่อง',
                'meta' => 'ชื่อไม่ใช่แค่ "คำเรียก" แต่เป็นส่วนหนึ่งของ World-Building เรียนรู้วิธีตั้งชื่อที่สะท้อนวัฒนธรรมและยุคสมัยของเรื่อง',
                'body' => '<p>การตั้งชื่อตัวละครดูเหมือนเป็นเรื่องเล็กน้อย แต่จริงๆ แล้วมันส่งผลต่อความน่าเชื่อถือของเรื่องอย่างมาก ลองนึกภาพนิยายจีนโบราณที่ตัวเอกชื่อ "จอห์น" หรือนิยาย Sci-Fi อวกาศที่ตัวละครชื่อ "สมชาย" มันจะทำให้ผู้อ่าน "สะดุด" ทันที</p>'
                        . '<h3>หัวข้อย่อยที่ 1: ความสำคัญของความสอดคล้อง</h3>'
                        . '<p>ชื่อควรจะสอดคล้องกับ "Setting" (ยุคสมัยและสถานที่) และ "วัฒนธรรม" ของโลกที่คุณสร้างขึ้น ชื่อที่มาจากวัฒนธรรมเดียวกันจะทำให้โลกของคุณดูกลมกลืนและน่าเชื่อถือ ไม่ใช่แค่การสุ่มชื่อที่ฟังดู "เท่"</p>'
                        . '<h3>หัวข้อย่อยที่ 2: วิธีการตั้งชื่อ</h3>'
                        . '<p>ถ้าเป็นนิยายอิงประวัติศาสตร์ (เช่น ยุควิคตอเรียน) ให้ค้นคว้าชื่อที่นิยมใช้ในยุคนั้นจริงๆ ถ้าเป็นนิยายแฟนตาซี คุณอาจต้อง "สร้าง" ระบบการตั้งชื่อของเผ่าพันธุ์นั้นๆ (เช่น ชื่อเอลฟ์มักจะฟังดูพริ้วไหว, ชื่อคนแคระมักจะฟังดูหนักแน่น) AI สามารถช่วยในจุดนี้ได้มาก</p>'
            ],
            [
                'title' => 'การเขียนคำโปรย (Blurb) ให้นิยายน่าสนใจจนต้องคลิกซื้อ',
                'meta' => 'คำโปรยคือ "เซลล์แมน" ที่ขายหนังสือของคุณใน 15 วินาที เรียนรู้วิธีเขียนคำโปรยสั้นๆ ที่ "จูงใจ" ให้คนกดซื้อ',
                'body' => '<p>หลังจาก "ปก" สิ่งที่ผู้อ่านจะตัดสินใจซื้อนิยายของคุณหรือไม่ก็คือ "คำโปรย" (Blurb) นี่คือพื้นที่โฆษณาที่สำคัญที่สุดของคุณ คุณมีเวลาแค่ไม่กี่วินาทีและไม่กี่บรรทัดที่จะเปลี่ยน "คนอ่านผ่านๆ" ให้กลายเป็น "ลูกค้า"</p>'
                        . '<h3>หัวข้อย่อยที่ 1: ความสำคัญของ "Hook" ในคำโปรย</h3>'
                        . '<p>คำโปรยไม่ใช่ "เรื่องย่อ" ห้ามเล่าเรื่องทั้งหมด! หน้าที่ของมันคือการ "ยั่ว" ให้อยากรู้ต่อ มันต้องนำเสนอ "ตัวเอก", "เป้าหมาย" ของเขา, "อุปสรรค" ที่เขาเจอ, และ "ความเสี่ยง" (Stakes) ที่จะเกิดขึ้นถ้าเขาทำไม่สำเร็จ</p>'
                        . '<h3>หัวข้อย่อยที่ 2: โครงสร้างคำโปรยที่ได้ผล</h3>'
                        . '<p>1. เปิดด้วยสถานการณ์ของตัวเอก (ที่กำลังเจอปัญหา) 2. นำเสนอจุดชนวน (Inciting Incident) ที่เปลี่ยนชีวิตเขา 3. พูดถึงอุปสรรคและความขัดแย้งหลัก 4. จบด้วย "คำถาม" หรือ "สถานการณ์หน้าสิวหน้าขวาน" (Cliffhanger) ที่ทำให้คนอ่านอยากรู้คำตอบ</p>'
            ],
            [
                'title' => 'ความผิดพลาดที่นักเขียนมือใหม่มักทำ (และวิธีแก้ไข)',
                'meta' => 'รวมข้อผิดพลาดคลาสสิกที่นักเขียนมือใหม่มักตกม้าตาย ตั้งแต่การบรรยายยืดยาวไปจนถึงตัวละครที่แบนราบ',
                'body' => '<p>ทุกคนเคยเป็นมือใหม่ และทุกคนเคยทำผิดพลาด สิ่งสำคัญคือการเรียนรู้จากข้อผิดพลาดเหล่านั้น การตระหนักว่า "จุดอ่อน" ทั่วไปของนักเขียนใหม่คืออะไร จะช่วยให้คุณหลีกเลี่ยงและพัฒนาฝีมือได้เร็วกว่าคนอื่น</p>'
                        . '<h3>หัวข้อย่อยที่ 1: ความผิดพลาดด้าน "การเล่าเรื่อง"</h3>'
                        . '<p>ที่พบบ่อยที่สุดคือการ "บอก" มากกว่า "แสดง" (Telling vs. Showing) การเปิดเรื่องด้วยการบรรยายประวัติตัวละครหรือโลกยืดยาว (Info Dump) แทนที่จะเริ่มด้วย "เหตุการณ์" และการใช้ตัวละคร "Mary Sue" (ตัวละครที่เก่ง/ดีเกินจริง)</p>'
                        . '<h3>หัวข้อย่อยที่ 2: ความผิดพลาดด้าน "กระบวนการ"</h3>'
                        . '<p>คือการ "ไม่ยอมแก้ไข" (Refusing to Edit) คิดว่าร่างแรกคือร่างที่สมบูรณ์แล้ว หรือการ "กลัว" คำวิจารณ์ (Feedback) จนไม่กล้าให้ใครอ่าน จงจำไว้ว่า "การแก้ไข" คือส่วนที่สำคัญที่สุดของการเขียน ไม่ใช่แค่การ "พิมพ์" ให้จบ</p>'
            ],
            [
                'title' => 'เทคนิคการเล่าเรื่องผ่านมุมมองบุคคลที่ 1 (First Person POV)',
                'meta' => 'การใช้ "ฉัน" ในการเล่าเรื่อง สร้างความใกล้ชิดแต่ก็มีข้อจำกัด เรียนรู้ข้อดีข้อเสียและเทคนิคการใช้ POV นี้',
                'body' => '<p>การเล่าเรื่องผ่านมุมมองบุคคลที่ 1 (First Person POV) หรือการใช้สรรพนาม "ฉัน" เป็นวิธีที่ทรงพลังในการสร้างความ "ใกล้ชิด" (Intimacy) ระหว่างผู้อ่านกับตัวละคร ผู้อ่านจะได้รับรู้ทุกอย่างผ่าน "สายตา" และ "ความคิด" ของตัวละครนี้เท่านั้น</p>'
                        . '<h3>หัวข้อย่อยที่ 1: ความสำคัญของ "เสียง" (Voice)</h3>'
                        . '<p>เมื่อใช้ POV 1 "เสียง" ของตัวละครคือทุกสิ่ง "วิธี" ที่เขาเล่าเรื่อง, คำศัพท์ที่เขาเลือกใช้, อคติของเขา จะต้องสะท้อน "นิสัย" ของเขาอย่างชัดเจน ถ้าตัวละครของคุณเป็นเด็ก 10 ขวบ เขาก็ไม่ควรเล่าเรื่องด้วยภาษาสวยหรูเหมือนนักปราชญ์</p>'
                        . '<h3>หัวข้อย่อยที่ 2: ข้อจำกัดและวิธีการแก้ไข</h3>'
                        . '<p>ข้อจำกัดที่ใหญ่ที่สุดคือ "ความไม่น่าเชื่อถือ" (Unreliable Narrator) เพราะผู้อ่านเห็นแค่สิ่งที่ตัวละครนี้ "อยาก" ให้เห็น และ "ข้อมูล" จะถูกจำกัดอยู่แค่สิ่งที่ตัวละครนี้ "รู้" เท่านั้น คุณต้องหาวิธีเปิดเผยข้อมูลสำคัญผ่าน "การกระทำ" หรือ "บทสนทนา" ที่ตัวละครนี้ไปประสบพบเจอ</p>'
            ],
            [
                'title' => 'การวางปม (Foreshadowing) อย่างมีชั้นเชิง',
                'meta' => 'สร้างความ "ว้าว" ให้ผู้อ่านในตอนจบ ด้วยการวาง "คำใบ้" เล็กๆ น้อยๆ ไว้ตลอดทางอย่างแนบเนียน',
                'body' => '<p>Foreshadowing คือการ "ทิ้งคำใบ้" หรือ "ลางสังหรณ์" เกี่ยวกับเหตุการณ์สำคัญที่จะเกิดขึ้นในอนาคต เมื่อผู้อ่านไปถึง "จุดเฉลย" (Twist) พวกเขาควรรู้สึก "ว้าว" และสามารถย้อนกลับมาคิดได้ว่า "เออ จริงด้วย! มันมีบอกใบ้ไว้ตรงนี้นี่นา!"</p>'
                        . '<h3>หัวข้อย่อยที่ 1: ความสำคัญของความแนบเนียน</h3>'
                        . '<p>การวางปมที่ดีต้อง "แนบเนียน" ไม่ใช่การ "ตะโกน" บอกผู้อ่าน ถ้ามันชัดเจนเกินไป ผู้อ่านจะเดาทางได้และรู้สึกว่า "ไม่เห็นจะพีคเลย" มันควรจะเป็นรายละเอียดเล็กๆ ที่ผู้อ่านมองข้ามไปในตอนแรก แต่อ่านซ้ำรอบสองแล้วจะเห็นชัดเจน</p>'
                        . '<h3>หัวข้อย่อยที่ 2: วิธีการวางปม</h3>'
                        . '<p>1. ผ่านบทสนทนา: ตัวละครพูดอะไรบางอย่างเป็น "ลาง" โดยไม่ตั้งใจ 2. ผ่านสัญลักษณ์: เช่น อากาศที่มืดครึ้มก่อนเกิดเหตุร้าย หรือ "อีกา" ที่บินผ่าน 3. ผ่านคำทำนาย: (ค่อนข้างชัด) แต่ก็ใช้ได้ในแนวแฟนตาซี 4. "Chekhov\'s Gun": ถ้าคุณแนะนำ "ปืน" ในองก์ที่ 1 มันต้องถูกยิงในองก์ที่ 3 (ห้ามใส่รายละเอียดที่ไม่สำคัญเข้ามา)</p>'
            ],
            [
                'title' => 'วิธีเขียนนิยายรักโรแมนติกให้โดนใจผู้อ่าน',
                'meta' => 'ไม่ใช่แค่ "รักกัน" แต่คือการสร้าง "เคมี" และ "อุปสรรค" ที่ทำให้ผู้อ่านเอาใจช่วยความสัมพันธ์ของพวกเขา',
                'body' => '<p>นิยายรักโรแมนติกคือแนวที่ขายดีที่สุดตลอดกาล แต่การเขียนให้ "โดนใจ" ไม่ใช่แค่การจับคู่ตัวละครสองตัวมาเจอกันแล้วรักกัน หัวใจของมันคือการสร้าง "ความผูกพันทางอารมณ์" (Emotional Connection) และ "อุปสรรค" ที่ท้าทายความสัมพันธ์นั้น</p>'
                        . '<h3>หัวข้อย่อยที่ 1: ความสำคัญของ "เคมี" (Chemistry)</h3>'
                        . '<p>"เคมี" คือสิ่งที่อธิบายไม่ได้แต่สัมผัสได้ มันคือ "แรงดึงดูด" ระหว่างตัวละคร ไม่ว่าจะเป็นการต่อปากต่อคำ, การช่วยเหลือซึ่งกันและกัน, หรือแม้แต่ความเกลียดชังในตอนแรก (Enemies to Lovers) ผู้อ่านต้อง "รู้สึก" ได้ว่าสองคนนี้ "เกิดมาเพื่อกันและกัน"</p>'
                        . '<h3>หัวข้อย่อยที่ 2: วิธีการสร้างอุปสรรค</h3>'
                        . '<p>ความรักที่ไร้อุปสรรคคือนิยายที่น่าเบื่อ อุปสรรค (Conflict) คือสิ่งที่ทำให้ความรักของพวกเขามีความหมาย อาจจะเป็นอุปสรรคภายนอก (เช่น ฐานะ, สงคราม, พ่อแม่ไม่เห็นด้วย) หรืออุปสรรคภายใน (เช่น ปมในอดีต, ความไม่มั่นใจ) ที่สำคัญคือพวกเขาต้อง "ต่อสู้" เพื่อให้ได้รักกัน</p>'
            ],
            [
                'title' => 'การค้นคว้าข้อมูล (Research) สำหรับนิยายอิงประวัติศาสตร์',
                'meta' => 'สร้างโลกอดีตให้มีชีวิตชีวาด้วยการค้นคว้าข้อมูลที่ "ลึก" และ "ถูกต้อง" ตั้งแต่เสื้อผ้าไปจนถึงวิธีคิดของผู้คน',
                'body' => '<p>การเขียนนิยายอิงประวัติศาสตร์ (Historical Fiction) คือความท้าทายอย่างสูง คุณไม่ได้แค่ "เล่าเรื่อง" แต่คุณกำลัง "ปลุก" อดีตให้กลับมามีชีวิตอีกครั้ง ผู้อ่านในแนวนี้มักจะมีความรู้และความคาดหวังสูง การค้นคว้าข้อมูลที่ผิดพลาดจึงเป็นเรื่องใหญ่มาก</p>'
                        . '<h3>หัวข้อย่อยที่ 1: ความสำคัญของ "ความถูกต้อง" (Accuracy)</h3>'
                        . '<p>ความถูกต้องไม่ใช่แค่เรื่อง "ปี ค.ศ." หรือ "ชื่อกษัตริย์" แต่คือ "รายละเอียด" เล็กๆ น้อยๆ ที่สร้างบรรยากาศ เช่น ผู้คนกินอะไร, เสื้อผ้าหน้าผม, คำสแลงที่ใช้, หรือแม้แต่ "วิธีคิด" (Mindset) ของคนในยุคนั้น (เช่น เรื่องทาส, สิทธิสตรี)</p>'
                        . '<h3>หัวข้อย่อยที่ 2: วิธีการค้นคว้าข้อมูล</h3>'
                        . '<p>อย่าใช้แค่ Wikipedia! อ่าน "Primary Sources" (เช่น บันทึก, จดหมาย) ถ้าหาได้ อ่าน "Secondary Sources" (เช่น หนังสือประวัติศาสตร์, บทความวิชาการ) ที่เขียนโดยผู้เชี่ยวชาญ และอย่าลืมค้นคว้าเรื่อง "ชีวิตประจำวัน" ไม่ใช่แค่เหตุการณ์ใหญ่ๆ AI (เช่น Perplexity) สามารถช่วยสรุปข้อมูลได้ดี</p>'
            ],
            [
                'title' => 'เส้นทางอาชีพนักเขียน: จากงานอดิเรกสู่รายได้หลัก',
                'meta' => 'เปลี่ยน "ความฝัน" ให้เป็น "อาชีพ" สำรวจเส้นทาง, ทักษะที่จำเป็น, และ Mindset ที่ต้องมีเพื่อยึดอาชีพนักเขียน',
                'body' => '<p>หลายคนฝันอยากเป็น "นักเขียน" แต่การเปลี่ยนจากงานอดิเรกมาเป็น "อาชีพ" ที่เลี้ยงตัวเองได้นั้นต้องใช้มากกว่าแค่ "พรสวรรค์" ในการเขียน มันต้องใช้ "วินัย", "ความเข้าใจธุรกิจ", และ "ความอึด" ที่จะเผชิญกับคำปฏิเสธ</p>'
                        . '<h3>หัวข้อย่อยที่ 1: ความสำคัญของ "วินัย" (Discipline)</h3>'
                        . '<p>เมื่อการเขียนคือ "งาน" คุณไม่สามารถรอ "แรงบันดาลใจ" (Mood) ได้ คุณต้อง "นั่งลงและเขียน" แม้ในวันที่คุณไม่อยากเขียนก็ตาม นี่คือความแตกต่างที่ชัดเจนที่สุดระหว่าง "มือสมัครเล่น" และ "มืออาชีพ" คุณต้องกำหนดเป้าหมายรายวัน (เช่น 1,000 คำต่อวัน) และทำให้ได้</p>'
                        . '<h3>หัวข้อย่อยที่ 2: ช่องทางและทักษะอื่นๆ</h3>'
                        . '<p>ในยุคนี้ "นักเขียน" ไม่ได้หมายถึง "นักเขียนนิยาย" อย่างเดียว อาจจะเป็น "Copywriter" (เขียนโฆษณา), "Content Writer" (เขียนบทความ SEO), "Ghostwriter" (เขียนให้คนอื่น), หรือ "นักเขียน Ebook" ที่จัดการทุกอย่างเอง (Self-Publishing) ซึ่งต้องเรียนรู้ทักษะ "การตลาด" และ "การเงิน" เพิ่มเติมด้วย</p>'
            ]
        ];
        
        // 4. วน Loop สร้างบทความ (ปรับเป็น 20 บทความ)
        for ($i = 0; $i < count($articlesData); $i++) {
            $data = $articlesData[$i];
            $title = $data['title'];
            $meta = $data['meta'];
            $body = $data['body'];

            // ⭐️ --- (ปรับปรุง) ตรรกะการสร้าง Slug --- ⭐️
            $slug = strtolower($title); 
            $slug = preg_replace('/[^\p{L}\p{N}\p{M}\s-]/u', '', $slug);
            $slug = preg_replace('/\s+/', '-', $slug);
            $slug = preg_replace('/-+/', '-', $slug);
            $slug = trim($slug, '-');
            $slug = $slug . '-' . ($i + 1);
            // ⭐️ --- (จบ) ตรรกะการสร้าง Slug --- ⭐️
            
            // 5. สุ่มเลือก Tags (1 ถึง 3 tags)
            $numTags = rand(1, 3);
            $randomKeys = (array) array_rand($tagsPool, $numTags);
            $selectedTags = [];
            foreach ($randomKeys as $key) {
                $selectedTags[] = $tagsPool[$key];
            }

            // 6. สร้าง Article
            $article = Article::create([
                'title'               => $title,
                'slug'                => $slug,
                'meta_description'    => $meta,
                'json_ld_description' => $meta,
                'body'                => $body,
                'tags'                => $selectedTags,
                'public_date'         => Carbon::now()->subDays(rand(1, 365))->subHours(rand(1, 23)),
            ]);

            // 7. กำหนดให้ 3 บทความแรกเป็น Feature Article
            if ($i < 3) {
                FeatureArticle::create([
                    'article_id' => $article->id
                ]);
            }
        }
    }
}

